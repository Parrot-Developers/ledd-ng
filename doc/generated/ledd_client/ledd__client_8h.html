<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>ledd_client: ledd_client/include/ledd_client.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ledd_client
   </div>
   <div id="projectbrief">Client library for the ledd daemon</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_44aacf22ed4e5d0644b3d34dc768c54f.html">ledd_client</a></li><li class="navelem"><a class="el" href="dir_9d1b04041c8cb87490044e0c1d97b1e6.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ledd_client.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>library for connecting to a ledd server and setting it's patterns  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for ledd_client.h:</div>
<div class="dyncontent">
<div class="center"><img src="ledd__client_8h__incl.png" border="0" usemap="#ledd__client_2include_2ledd__client_8h" alt=""/></div>
<map name="ledd__client_2include_2ledd__client_8h" id="ledd__client_2include_2ledd__client_8h">
</map>
</div>
</div>
<p><a href="ledd__client_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structledd__client__ops.html">ledd_client_ops</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">structure holding the callbacks to pass to <a class="el" href="ledd__client_8h.html#af6ff3fea259132f96ada38a32c92d294">ledd_client_new()</a>  <a href="structledd__client__ops.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ab08d6d1bab9f0c421f8cea19e9ebef64"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ledd__client_8h.html#ab08d6d1bab9f0c421f8cea19e9ebef64">LEDD_DEFAULT_ADDRESS</a>&#160;&#160;&#160;&quot;unix:@ledd.socket&quot;</td></tr>
<tr class="memdesc:ab08d6d1bab9f0c421f8cea19e9ebef64"><td class="mdescLeft">&#160;</td><td class="mdescRight">default address ledd listens to when not configured otherwise  <a href="#ab08d6d1bab9f0c421f8cea19e9ebef64">More...</a><br /></td></tr>
<tr class="separator:ab08d6d1bab9f0c421f8cea19e9ebef64"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ac098c4226358e5bd3e3f99064c2eeebc"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ledd__client_8h.html#ac098c4226358e5bd3e3f99064c2eeebc">ledd_client_connection_cb</a> )(void *userdata, bool connected)</td></tr>
<tr class="memdesc:ac098c4226358e5bd3e3f99064c2eeebc"><td class="mdescLeft">&#160;</td><td class="mdescRight">type of the callback to pass to ledd_client_new to be notified when the client gets connected to ledd  <a href="#ac098c4226358e5bd3e3f99064c2eeebc">More...</a><br /></td></tr>
<tr class="separator:ac098c4226358e5bd3e3f99064c2eeebc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab85f27d0d58ea62745d3c40b5465384c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ledd__client_8h.html#ab85f27d0d58ea62745d3c40b5465384c">ledd_client_get_ledd_address</a> (const char *global_conf_path)</td></tr>
<tr class="separator:ab85f27d0d58ea62745d3c40b5465384c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6ff3fea259132f96ada38a32c92d294"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structledd__client.html">ledd_client</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ledd__client_8h.html#af6ff3fea259132f96ada38a32c92d294">ledd_client_new</a> (const char *address, const struct <a class="el" href="structledd__client__ops.html">ledd_client_ops</a> *ops, void *userdata)</td></tr>
<tr class="separator:af6ff3fea259132f96ada38a32c92d294"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8554721f86e30e5bbefa7d59c39713e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ledd__client_8h.html#ae8554721f86e30e5bbefa7d59c39713e">ledd_client_connect</a> (struct <a class="el" href="structledd__client.html">ledd_client</a> *client)</td></tr>
<tr class="separator:ae8554721f86e30e5bbefa7d59c39713e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72beef54d814f25ceb50d5e197424285"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ledd__client_8h.html#a72beef54d814f25ceb50d5e197424285">ledd_client_get_fd</a> (struct <a class="el" href="structledd__client.html">ledd_client</a> *client)</td></tr>
<tr class="separator:a72beef54d814f25ceb50d5e197424285"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b0f9c8db7f3f63a799bdcf42459861d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ledd__client_8h.html#a3b0f9c8db7f3f63a799bdcf42459861d">ledd_client_process_events</a> (struct <a class="el" href="structledd__client.html">ledd_client</a> *client)</td></tr>
<tr class="separator:a3b0f9c8db7f3f63a799bdcf42459861d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3044f4bb37db53fb111689db69745ec"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ledd__client_8h.html#ad3044f4bb37db53fb111689db69745ec">ledd_client_set_pattern</a> (struct <a class="el" href="structledd__client.html">ledd_client</a> *client, const char *pattern, bool resume_previous)</td></tr>
<tr class="separator:ad3044f4bb37db53fb111689db69745ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2157634df77e405e108256b62f4356c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ledd__client_8h.html#a2157634df77e405e108256b62f4356c0">ledd_client_destroy</a> (struct <a class="el" href="structledd__client.html">ledd_client</a> **client)</td></tr>
<tr class="separator:a2157634df77e405e108256b62f4356c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>library for connecting to a ledd server and setting it's patterns </p>
<p>Copyright (c) 2016 Parrot S.A. All rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:</p><ul>
<li>Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.</li>
<li>Neither the name of the Parrot Company nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.</li>
</ul>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE PARROT COMPANY BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="ab08d6d1bab9f0c421f8cea19e9ebef64"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEDD_DEFAULT_ADDRESS&#160;&#160;&#160;&quot;unix:@ledd.socket&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>default address ledd listens to when not configured otherwise </p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="ac098c4226358e5bd3e3f99064c2eeebc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ledd_client_connection_cb</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>type of the callback to pass to ledd_client_new to be notified when the client gets connected to ledd </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userdata</td><td>userdata passed to <a class="el" href="ledd__client_8h.html#af6ff3fea259132f96ada38a32c92d294">ledd_client_new()</a> along with the callback </td></tr>
    <tr><td class="paramname">connected</td><td>true if the client got connected, false if it got disconnected </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ae8554721f86e30e5bbefa7d59c39713e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ledd_client_connect </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structledd__client.html">ledd_client</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Connects the ledd client to the server </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>ledd client to connect </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success, errno-compatible negative value on error </dd></dl>

</div>
</div>
<a class="anchor" id="a2157634df77e405e108256b62f4356c0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ledd_client_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structledd__client.html">ledd_client</a> **&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Destroys a ledd client context. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>ledd client context to destroy, set to NULL on output </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a72beef54d814f25ceb50d5e197424285"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ledd_client_get_fd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structledd__client.html">ledd_client</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Gets the underlying file descriptor of a ledd client context. The file descriptor must be waited for read events in an event loop, and <a class="el" href="ledd__client_8h.html#a3b0f9c8db7f3f63a799bdcf42459861d">ledd_client_process_events()</a> must be called when it triggers a read event. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>ledd client context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>positive file descriptor on success, negative errno-compatible value on error </dd></dl>

</div>
</div>
<a class="anchor" id="ab85f27d0d58ea62745d3c40b5465384c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ledd_client_get_ledd_address </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>global_conf_path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves the libpomp address ledd is listening to, by reading ledd's global.conf configuration file. Returns "unix:@ledd.socket" by default if for any reason, no address could be found. If global_conf_path, tries to read the address in /etc/ledd/global.conf by default. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">global_conf_path</td><td>path to the global.conf configuration file used b ledd, can be NULL </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>address used by ledd, defaulting to "unix:@ledd.socket", must be freed after usage, on error, returns NULL with errno set </dd></dl>

</div>
</div>
<a class="anchor" id="af6ff3fea259132f96ada38a32c92d294"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structledd__client.html">ledd_client</a>* ledd_client_new </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="structledd__client__ops.html">ledd_client_ops</a> *&#160;</td>
          <td class="paramname"><em>ops</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>userdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates and initializes a ledd client context </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>address of the ledd server to contact, can be NULL, in this case, defaults to "unix:@ledd.socket" </td></tr>
    <tr><td class="paramname">ops</td><td>client callbacks </td></tr>
    <tr><td class="paramname">userdata</td><td>userdata pointer passed to the callbacks when called </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL on error, with errno set, ledd client context newly allocated and initialized on success </dd></dl>

</div>
</div>
<a class="anchor" id="a3b0f9c8db7f3f63a799bdcf42459861d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ledd_client_process_events </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structledd__client.html">ledd_client</a> *&#160;</td>
          <td class="paramname"><em>client</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Processes read events detected on a ledd client's file descriptor </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>ledd client context </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>errno-compatible negative value on error, 0 on success </dd></dl>

</div>
</div>
<a class="anchor" id="ad3044f4bb37db53fb111689db69745ec"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ledd_client_set_pattern </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structledd__client.html">ledd_client</a> *&#160;</td>
          <td class="paramname"><em>client</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pattern</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>resume_previous</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Sets a ledd pattern to be played by ledd. Multiple led patterns can be played at the same time, provided they control different leds. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>ledd client context </td></tr>
    <tr><td class="paramname">pattern</td><td>name of the pattern, as defined in the platform.conf ledd configuration file </td></tr>
    <tr><td class="paramname">resume_previous</td><td>if true and the patterns doesn't cycle an infinite of time, pause the previous pattern and resume it when the new pattern ends </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>errno-compatible negative value on error, 0 on success </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 29 2016 15:51:10 for ledd_client by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
